<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MapML Leaflet plugin</title>
    <link rel="stylesheet" href="bower_components/polymer-leaflet/leaflet.css" />
    <link rel="stylesheet" href="src/mapml.css" />
    <script src="bower_components/polymer-leaflet/leaflet-src.js"></script>
    <script src="bower_components/proj4Leaflet/lib/proj4-compressed.js"></script> 
    <script src="bower_components/proj4Leaflet/src/proj4leaflet.js"></script>
    <script src="src/mapml.js"></script>
    <script src="src/URI.js"></script>
    <script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="bower_components/polymer/polymer.html">
  </head>
  <body>
    <h3>MapML Leaflet plugin</h3>
    <div id="cbmtile-map" style="height: 300px;width: 40%;"></div>
    <script>
        addEventListener('WebComponentsReady', function() {
                     cbmt =  M.mapMLLayer('http://geogratis.gc.ca/api/beta/mapml/en/cbmtile/cbmt/',null,{zIndex: 0}),
//                     cubewerx = M.mapMLLayer('https://tb13.cubewerx.com/cubewerx/cubeserv/default/wmts/1.0.0/mapML/gtopo30.gtopo30?projection=CBMTILE',null,{zIndex: 1}),
//                     nts = M.mapMLLayer('http://geogratis.gc.ca/api/beta/mapml/en/cbmtile/nts/',null,{zIndex: 3}),
//                     te = M.mapMLLayer('http://geogratis.gc.ca/mapml/en/cbmtile/te2003/',null,{zIndex: 5}),
//                     f = M.mapMLLayer('http://geogratis.gc.ca/api/beta/vectors/canvec/50k/features/',null,{zIndex: 7}),
//                     f2 = M.mapMLLayer('http://geogratis.gc.ca/api/beta/vectors/canvec/50k/features/',null,{zIndex: 9}),
          cbmtMap =    L.map('cbmtile-map',{
                  center: [45.398043,-75.70683],
                  projection: 'CBMTILE',
                  crs: M['CBMTILE'],
                  zoom: 2,
                  layers: [cbmt],
            // See https://github.com/Maps4HTML/MapML-Leaflet-Client/issues/24 
                  fadeAnimation: true
                }),
          cbmtLayerControl = M.mapMlLayerControl({'Canada Base Map':cbmt},{"collapsed":false}).addTo(cbmtMap);
          cbmtMap.attributionControl.setPrefix('<a href="https://www.w3.org/community/maps4html/" title="W3C Maps4HTML Community Group">MapML</a>');
//          marker = L.marker([45.398043,-75.70683],{draggable:true}).addTo(cbmtMap);
        });
    </script>
  </body>
</html>
